<%- include('../includes/head.ejs') %>
    <link rel="stylesheet" href="/css/chart.css">
<%- include('../includes/start.ejs') %>

    <%- include('../includes/navigation.ejs') %>
    <main class="main-entry">
        <section class="panel-center">
            <h2>Analysis of <a class="header__link" target="_blank" href="<%= urlAnalyzed %>"><%= siteTitle %></a></h2>
            <p>
                There are <%= analysis.totalWords %> words on this website
                (excluding <a href="/about">stop words</a>).
            </p>
            <p>
                The most used word is "<%= analysis.mostUsedWord %>" with
                <%= analysis.mostUses %> uses found.
            </p>
            <p>
                Top 10 words
                <label class="switch">
                    <input id="switchCheck" type="checkbox" name="checkbox">
                    <span class="slider"></span>
                </label>
                Top 100 words
            </p>
        </section>
        <section class="panel-center" id="chartTopWords"></section>
    </main>

    <script>
        const topTenWords = JSON.parse('<%- JSON.stringify(analysis.topTenWords) %>');
        const topHundredWords = JSON.parse('<%- JSON.stringify(analysis.topHundredWords) %>');
        let dataset = topTenWords;
    </script>
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <script src="/scripts/chartTopWords.js"></script>
    <script>
        const switchCheck = document.getElementById('switchCheck');

        switchCheck.addEventListener('change', function() {
            if(this.checked) {
                dataset = topHundredWords;
                resetCanvas();
            } else {
                dataset = topTenWords;
                resetCanvas();
            }
        });
    </script>

<%- include('../includes/end.ejs') %>